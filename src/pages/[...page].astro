---
import HomeSider from '@components/layout/sider/HomeSider';
import PostList from '@components/post/PostList.astro';
import Cover from '@components/ui/cover';
import { siteConfig } from '@constants/site-config';
import Layout from '@layouts/Layout.astro';
import { getSortedPosts } from '@lib/content';
import type { PaginateFunction } from 'astro';

export async function getStaticPaths({ paginate }: { paginate: PaginateFunction }) {
  const postCollections = await getSortedPosts();
  return paginate(postCollections, { pageSize: 10 });
}

const { page } = Astro.props;
---

<Layout title={siteConfig.title}>
  <div class="mb-20 flex flex-col">
    <Cover client:load />
    <div class="mx-auto flex items-start justify-center pr-11 md:w-full md:pr-0">
      <HomeSider client:load>
        <div class="sticky top-20 flex min-w-[16rem] flex-col items-center p-4 px-5 md:hidden">Loading</div>
      </HomeSider>
      <PostList posts={page.data} page={page} />
    </div>
  </div>
</Layout>
