---
import CategoryList from '@components/category/CategoryList.astro';
import HomeSider from '@components/layout/HomeSider.astro';
import Cover from '@components/ui/cover/Cover.astro';
import Layout from '@layouts/Layout.astro';
import TwoColumnLayout from '@layouts/TwoColumnLayout.astro';
import { getCategoryLinks, getCategoryList } from '@lib/content';
import { getTranslations } from '@i18n/index';
import type { SupportedLanguage } from '@types/i18n';

// 当前语言
const currentLanguage: SupportedLanguage = 'zh-TW';
const translations = getTranslations(currentLanguage);

const { categories, countMap } = await getCategoryList();
const links = getCategoryLinks(categories, '');
---

<Layout title={`${translations.category.allCategories} | ${translations.seo.defaultTitle}`}>
  <TwoColumnLayout>
    <Cover slot="cover" title={translations.category.allCategories} />
    <HomeSider slot="sider" />
    <CategoryList
      categories={categories}
      countMap={countMap}
      totalCount={links.length ?? 0}
      currentLanguage={currentLanguage}
    />
  </TwoColumnLayout>
</Layout>
