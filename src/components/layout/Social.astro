---
import { socialConfig } from '@constants/site-config';
import { cn } from '@lib/utils';
import { Icon } from 'astro-icon/components';
import { capitalize } from 'es-toolkit';
---

<div class="flex-center mt-2 flex-wrap gap-2">
  {
    Object.entries(socialConfig).map(([key, config]) => {
      const { url, icon, color } = config;
      return (
        <div>
          <a
            class={cn('social-link flex-center relative rounded-full p-1 transition-all duration-300', {
              'bg-primary/20 text-primary hover:bg-primary/30': !color,
            })}
            style={color ? `--link-color: ${color}` : ''}
            data-platform={key}
            href={url}
            title={capitalize(key)}
            data-tooltip-placement="top"
            aria-label={capitalize(key)}
          >
            <Icon name={icon} class="inline-block size-5" />
          </a>
        </div>
      );
    })
  }
</div>

<style>
  .social-link {
    background-color: color-mix(in srgb, var(--link-color) 20%, transparent);
    color: var(--link-color);
  }
  .social-link:hover {
    background-color: var(--link-color);
    color: white;
  }

  /* 暗色模式下的特殊处理 */
  :global(.dark) .social-link[data-platform='github'],
  :global(.dark) .social-link[data-platform='twitter'] {
    background-color: color-mix(in srgb, #fff 20%, transparent);
    color: #fff;
  }
  :global(.dark) .social-link[data-platform='github']:hover,
  :global(.dark) .social-link[data-platform='twitter']:hover {
    background-color: #fff;
    color: #000000;
  }
</style>
